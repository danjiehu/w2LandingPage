## Why WeChat Pay

- Wechat have ~100% installation in China
- Low fees

## Scenarios

- QRCode Payment
- Quick Pay (Barcode scanned by offline merchants)
- inside Public Account ([JSSDK click for doc](https://pay.weixin.qq.com/wiki/doc/api/jsapi.php?chapter=7_1))
- inside iOS / Android apps (Native SDK)
- inside MiniProgram

------

## WeChat Merchant Account

https://pay.weixin.qq.com/

### WeChat pay requires

- A verified official account
- A company business license
- A corporate bank account

## WECHAT PAYMENT

Allow payment at root URL.

![payment_setting](https://kitt.lewagon.com/karr/assets/china/wechat_env_setup/payment_setting-63ccd06644ad01f637d219f6c27ef74d5886a7deda29cbb4278be42b42b8532b.png)

## Payment Merchants

Certification file must be installed on your computer before any further important action.

![payment_certificate](https://kitt.lewagon.com/karr/assets/china/wechat_env_setup/payment_certificate-bfb5855758a7f0f2a0ba9121cdd5d4b0cc189354fb719b9c6e2c827f01477ab6.png)

## Merchants ID and Key

API secret (`wechat_pay_api_key`)

![merchants_api](https://kitt.lewagon.com/karr/assets/china/wechat_env_setup/merchants_api-9d74a6c47e0c4018b2b0502e637ab5039b85b306f0a83667da6c6b53be806bf7.png)

## Merchants API certificate

Only needed for refund API

![download_api_certificate](https://kitt.lewagon.com/karr/assets/china/wechat_env_setup/download_api_certificate-d66eb70b34a8b257e4fd31f76d80d202d7590a4d7b5f46618f68247bb38ffcf8.png)

## Merchants ID

`wechat_pay_mch_id` is the last thing you need.

![merchants_info](https://kitt.lewagon.com/karr/assets/china/wechat_env_setup/merchants_info-1828b571a922ee64b9a2271f9c9ed2322426a718a7a9099006a29f4aa68216f0.png)

## Payment Flow Diagram

3 party dance

## Payment

Using eCommerce Frontend built last weekend challenge (Waimai app)

### Payment function on BaaS


### Test with payment

## Your turn! Dior Gift Cards

Build a new eCommerce app but adapt existing code to save time


